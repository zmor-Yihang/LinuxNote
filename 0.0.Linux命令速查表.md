# Linux命令速查表

这是一个系统化的Linux常用命令总结，按功能类别组织，便于查阅和学习。

## 1. 文件和目录管理

### ls - 列出目录内容
**功能说明：** 显示目录中的文件和子目录列表

**常用参数：**
- `-l`：长格式显示，包含权限、所有者、大小等详细信息
- `-a`：显示所有文件，包括隐藏文件（以.开头的文件）
- `-h`：以人类可读的方式显示文件大小（如KB、MB）
- `-R`：递归显示子目录内容

**示例：**
```bash
# 详细列出当前目录内容
ls -l

# 显示所有文件（包括隐藏文件）
ls -la

# 以人类可读方式显示文件大小
ls -lh

# 递归列出所有子目录
ls -R
```

### cd - 切换目录
**功能说明：** 更改当前工作目录

**常用参数：**
- `~`：切换到用户主目录
- `-`：切换到上一个工作目录
- `..`：切换到上级目录

**示例：**
```bash
# 切换到用户主目录
cd ~

# 切换到上一个目录
cd -

# 切换到上级目录
cd ..

# 切换到指定路径
cd /var/log
```

### pwd - 显示当前目录
**功能说明：** 显示当前工作目录的完整路径

**示例：**
```bash
# 显示当前目录路径
pwd
```

### mkdir - 创建目录
**功能说明：** 创建新目录

**常用参数：**
- `-p`：递归创建目录，如果父目录不存在则一并创建
- `-v`：显示创建过程的详细信息

**示例：**
```bash
# 创建单个目录
mkdir test_folder

# 递归创建多级目录
mkdir -p project/src/main

# 显示创建过程
mkdir -pv project/src/main
```

### cp - 复制文件或目录
**功能说明：** 复制文件或目录

**常用参数：**
- `-r`：递归复制目录及其内容
- `-i`：覆盖前询问确认
- `-v`：显示复制过程的详细信息
- `-p`：保留文件属性（权限、时间戳等）

**示例：**
```bash
# 复制文件
cp file.txt backup.txt

# 递归复制目录
cp -r source_folder/ destination_folder/

# 复制并保留文件属性
cp -p important.conf backup.conf
```

### mv - 移动或重命名文件
**功能说明：** 移动文件或目录，也可用于重命名

**常用参数：**
- `-i`：覆盖前询问确认
- `-v`：显示移动过程的详细信息

**示例：**
```bash
# 重命名文件
mv old_name.txt new_name.txt

# 移动文件到目录
mv file.txt /home/user/documents/

# 移动多个文件
mv file1.txt file2.txt /target/directory/
```

### rm - 删除文件或目录
**功能说明：** 删除文件或目录

**常用参数：**
- `-r`：递归删除目录及其内容
- `-f`：强制删除，不提示确认
- `-i`：删除前询问确认

**示例：**

```bash
# 删除文件
rm unwanted_file.txt

# 递归删除目录
rm -r old_folder/

# 强制删除（慎用）
rm -rf temp_folder/
```

### touch - 创建空文件或更新时间戳
**功能说明：** 创建空文件或更新现有文件的时间戳

**示例：**
```bash
# 创建新文件
touch new_file.txt

# 更新文件时间戳
touch existing_file.txt

# 创建多个文件
touch file1.txt file2.txt file3.txt
```

## 2. 文件内容查看和编辑

### cat - 显示文件内容
**功能说明：** 显示文件全部内容

**常用参数：**
- `-n`：显示行号
- `-b`：显示行号，但空白行不编号

**示例：**
```bash
# 显示文件内容
cat file.txt

# 显示带行号的内容
cat -n script.py

# 合并显示多个文件
cat file1.txt file2.txt
```

### less - 分页显示文件内容
**功能说明：** 分页显示文件内容，适合查看大文件

**常用操作：**
- `空格键`：向下翻页
- `b`：向上翻页
- `q`：退出
- `/关键词`：搜索内容

**示例：**
```bash
# 分页查看大文件
less large_file.log

# 查看日志文件
less /var/log/syslog
```

### head - 显示文件开头部分
**功能说明：** 显示文件的前几行

**常用参数：**
- `-n`：指定显示的行数（默认10行）

**示例：**
```bash
# 显示文件前10行
head file.txt

# 显示文件前20行
head -n 20 data.csv
```

### tail - 显示文件结尾部分
**功能说明：** 显示文件的最后几行

**常用参数：**
- `-n`：指定显示的行数（默认10行）
- `-f`：实时跟踪文件的新增内容

**示例：**
```bash
# 显示文件最后10行
tail file.txt

# 显示文件最后50行
tail -n 50 error.log

# 实时监控日志文件
tail -f /var/log/nginx/access.log
```

### grep - 文本搜索
**功能说明：** 在文件中搜索指定的文本模式

**常用参数：**
- `-i`：忽略大小写
- `-r`：递归搜索目录
- `-n`：显示匹配行的行号
- `-v`：显示不匹配的行

**示例：**
```bash
# 在文件中搜索关键词
grep "error" log.txt

# 忽略大小写搜索
grep -i "warning" log.txt

# 递归搜索目录
grep -r "function" src/

# 显示行号
grep -n "TODO" script.py
```

### find - 查找文件
**功能说明：** 根据各种条件查找文件

**常用参数：**
- `-name`：按文件名查找
- `-type`：按文件类型查找（f=文件，d=目录）
- `-size`：按文件大小查找
- `-mtime`：按修改时间查找

**示例：**
```bash
# 按文件名查找
find /home -name "*.txt"

# 查找目录
find . -type d -name "test*"

# 查找大于100MB的文件
find / -size +100M

# 查找7天内修改过的文件
find . -mtime -7
```

## 3. 系统信息和监控

### ps - 显示进程状态
**功能说明：** 显示当前运行的进程信息

**常用参数：**
- `aux`：显示所有进程的详细信息
- `-ef`：全格式显示所有进程

**示例：**
```bash
# 显示所有进程
ps aux

# 全格式显示进程
ps -ef

# 查找特定进程
ps aux | grep nginx
```

### top - 实时显示进程信息
**功能说明：** 动态显示系统进程和资源使用情况

**常用操作：**
- `q`：退出
- `P`：按CPU使用率排序
- `M`：按内存使用率排序
- `k`：终止进程

**示例：**
```bash
# 启动top
top

# 只显示特定用户的进程
top -u username
```

### htop - 增强版进程查看器
**功能说明：** 比top更友好的进程查看工具（需要安装）

**示例：**
```bash
# 启动htop
htop
```

### df - 显示磁盘空间使用情况
**功能说明：** 显示文件系统的磁盘空间使用情况

**常用参数：**
- `-h`：以人类可读的方式显示
- `-T`：显示文件系统类型

**示例：**
```bash
# 显示磁盘使用情况
df -h

# 显示文件系统类型
df -T
```

### du - 显示目录空间使用情况
**功能说明：** 显示目录或文件的磁盘使用情况

**常用参数：**
- `-h`：以人类可读的方式显示
- `-s`：只显示总计
- `-a`：显示所有文件和目录

**示例：**
```bash
# 显示当前目录使用情况
du -h

# 显示指定目录的总大小
du -sh /var/log

# 显示目录下各子目录大小
du -h --max-depth=1 /home
```

### free - 显示内存使用情况
**功能说明：** 显示系统内存和交换空间的使用情况

**常用参数：**
- `-h`：以人类可读的方式显示
- `-m`：以MB为单位显示

**示例：**
```bash
# 显示内存使用情况
free -h

# 以MB为单位显示
free -m
```

### uname - 显示系统信息
**功能说明：** 显示系统内核和硬件信息

**常用参数：**
- `-a`：显示所有信息
- `-r`：显示内核版本
- `-m`：显示硬件架构

**示例：**
```bash
# 显示所有系统信息
uname -a

# 显示内核版本
uname -r

# 显示硬件架构
uname -m
```

## 4. 网络操作

### ping - 测试网络连通性
**功能说明：** 向目标主机发送ICMP回显请求

**常用参数：**
- `-c`：指定发送的包数量
- `-i`：设置间隔时间

**示例：**
```bash
# 持续ping
google.com

# 发送4个包后停止
ping -c 4 baidu.com

# 设置1秒间隔
ping -i 1 192.168.1.1
```

### ifconfig/ip - 网络接口配置
**功能说明：** 显示和配置网络接口（ifconfig已逐渐被ip命令替代）

**示例：**
```bash
# 显示所有网络接口（旧命令）
ifconfig

# 显示网络接口（新命令）
ip addr show

# 启用网络接口
sudo ip link set eth0 up
```

### netstat/ss - 网络连接状态
**功能说明：** 显示网络连接、路由表、接口状态等

**常用参数：**
- `-t`：显示TCP连接
- `-u`：显示UDP连接
- `-l`：显示监听的端口
- `-n`：显示数字地址和端口号

**示例：**
```bash
# 显示所有监听端口
netstat -tuln

# 显示TCP连接
ss -t

# 显示监听中的服务
netstat -plnt
```

### wget - 下载文件
**功能说明：** 从网络下载文件

**常用参数：**
- `-O`：指定输出文件名
- `-c`：断点续传
- `-b`：后台下载

**示例：**
```bash
# 下载文件
wget http://example.com/file.zip

# 指定输出文件名
wget -O myfile.zip http://example.com/file.zip

# 断点续传
wget -c http://example.com/large_file.iso
```

### curl - 数据传输工具
**功能说明：** 用于与服务器之间传输数据的强大工具

**常用参数：**
- `-O`：保存远程文件到本地
- `-L`：跟随重定向
- `-H`：添加HTTP头

**示例：**
```bash
# 下载文件
curl -O http://example.com/file.zip

# 获取网页内容
curl http://example.com

# 发送GET请求
curl -X GET "http://api.example.com/data"
```

### ssh - 远程登录
**功能说明：** 安全地远程登录到其他计算机

**常用参数：**
- `-p`：指定端口
- `-i`：指定私钥文件

**示例：**
```bash
# 远程登录
ssh username@remote_host

# 指定端口
ssh -p 2222 username@remote_host

# 使用私钥登录
ssh -i ~/.ssh/id_rsa username@remote_host
```

### scp - 安全复制文件
**功能说明：** 在本地和远程主机之间安全地复制文件

**常用参数：**
- `-r`：递归复制目录
- `-P`：指定端口

**示例：**
```bash
# 复制本地文件到远程
scp file.txt username@remote_host:/path/to/destination

# 从远程复制文件到本地
scp username@remote_host:/path/to/file.txt ./

# 递归复制目录
scp -r folder/ username@remote_host:/path/to/destination
```

## 5. 权限和用户管理

### chmod - 更改文件权限
**功能说明：** 更改文件或目录的访问权限

**权限表示：**
- 数字模式：4=读，2=写，1=执行
- 符号模式：u=用户，g=组，o=其他，a=所有

**示例：**
```bash
# 数字模式设置权限
chmod 755 script.sh

# 符号模式添加执行权限
chmod +x script.sh

# 递归更改目录权限
chmod -R 644 documents/
```

### chown - 更改文件所有者
**功能说明：** 更改文件或目录的所有者和所属组

**常用参数：**
- `-R`：递归更改目录及其内容

**示例：**
```bash
# 更改文件所有者
chown user file.txt

# 更改所有者和组
chown user:group file.txt

# 递归更改目录所有者
chown -R user:group project/
```

### sudo - 以超级用户身份执行命令
**功能说明：** 以超级用户或其他用户的身份执行命令

**常用参数：**
- `-u`：指定要切换到的用户

**示例：**
```bash
# 以root身份执行命令
sudo apt update

# 切换到其他用户执行
sudo -u postgres psql

# 编辑系统文件
sudo nano /etc/hosts
```

### useradd/adduser - 添加用户
**功能说明：** 创建新用户账户

**示例：**
```bash
# 添加用户（需要手动设置密码）
sudo useradd newuser

# 交互式添加用户（推荐）
sudo adduser newuser

# 指定用户主目录
sudo useradd -m -d /home/newuser newuser
```

### passwd - 更改用户密码
**功能说明：** 更改用户密码

**示例：**
```bash
# 更改当前用户密码
passwd

# 更改其他用户密码（需要root权限）
sudo passwd username
```

## 6. 软件包管理

### apt (Debian/Ubuntu) - 软件包管理
**功能说明：** Debian系Linux发行版的软件包管理工具

**常用命令：**
- `update`：更新软件包列表
- `upgrade`：升级已安装的软件包
- `install`：安装软件包
- `remove`：删除软件包

**示例：**
```bash
# 更新软件包列表
sudo apt update

# 升级所有软件包
sudo apt upgrade

# 安装软件包
sudo apt install nginx

# 删除软件包
sudo apt remove nginx

# 清理不需要的软件包
sudo apt autoremove
```

### yum/dnf (Red Hat/CentOS) - 软件包管理
**功能说明：** Red Hat系Linux发行版的软件包管理工具

**常用命令：**
- `update`：更新软件包
- `install`：安装软件包
- `remove`：删除软件包

**示例：**
```bash
# 更新所有软件包
sudo yum update

# 安装软件包
sudo yum install httpd

# 删除软件包
sudo yum remove httpd

# 搜索软件包
sudo yum search mysql
```

## 7. 系统维护

### systemctl - 系统服务管理
**功能说明：** 管理系统服务（systemd系统）

**常用命令：**
- `start`：启动服务
- `stop`：停止服务
- `restart`：重启服务
- `status`：查看服务状态
- `enable`：设置开机自启
- `disable`：禁用开机自启

**示例：**
```bash
# 启动服务
sudo systemctl start nginx

# 停止服务
sudo systemctl stop nginx

# 重启服务
sudo systemctl restart nginx

# 查看服务状态
sudo systemctl status nginx

# 设置开机自启
sudo systemctl enable nginx
```

### journalctl - 系统日志查看
**功能说明：** 查看systemd系统日志

**常用参数：**
- `-f`：实时跟踪日志
- `-n`：显示最近的几行日志
- `-u`：查看特定服务的日志

**示例：**
```bash
# 查看所有日志
journalctl

# 查看最近50行日志
journalctl -n 50

# 实时跟踪日志
journalctl -f

# 查看特定服务的日志
journalctl -u nginx
```

### crontab - 定时任务
**功能说明：** 管理用户的定时任务

**常用参数：**
- `-e`：编辑定时任务
- `-l`：列出定时任务
- `-r`：删除所有定时任务

**示例：**
```bash
# 编辑当前用户的定时任务
crontab -e

# 列出当前用户的定时任务
crontab -l

# 删除所有定时任务
crontab -r
```

### tar - 归档工具
**功能说明：** 创建和提取归档文件

**常用参数：**
- `-c`：创建归档文件
- `-x`：提取归档文件
- `-v`：显示详细过程
- `-f`：指定归档文件名
- `-z`：通过gzip压缩
- `-j`：通过bzip2压缩

**示例：**
```bash
# 创建tar归档
tar -cvf archive.tar file1.txt file2.txt

# 提取tar归档
tar -xvf archive.tar

# 创建并压缩归档（gzip）
tar -czvf archive.tar.gz folder/

# 提取压缩归档
tar -xzvf archive.tar.gz
```

## 8. 内核日志查看命令

### dmesg - 查看内核日志
**功能说明：** 显示内核环形缓冲区的信息，用于查看启动信息和系统事件

**常用参数：**
- `-w`：实时监控内核日志
- `-T`：显示带时间戳的日志
- `-H`：显示人类可读的时间格式
- `-c`：清空内核环形缓冲区

**示例：**
```bash
# 查看所有内核日志
dmesg

# 查看最近的10条日志
dmesg | tail -10     #  | 的作用是：把前一个命令的输出，当作后一个命令的输入。

# 实时监控内核日志
dmesg -w

# 查看特定模块的日志
dmesg | grep "param"

# 显示带时间戳的日志
dmesg -T | grep "模块名"

# 清空日志
sudo dmesg -c
```

### insmod - 加载内核模块
**功能说明：** 将编译好的内核模块加载到系统中

**示例：**
```bash
# 加载模块
sudo insmod 模块文件路径

# 使用参数加载模块
sudo insmod 模块.ko a=100 array=10,20,30

# 卸载模块
sudo rmmod 模块名

# 查看已加载的模块
lsmod | grep "模块名"
lsmod | grep LED
ls -l /dev/cdev_led*
```

### modinfo - 显示模块信息
**功能说明：** 显示内核模块的详细信息

**示例：**
```bash
# 查看模块详细信息
modinfo 模块文件路径

# 查看模块参数
modinfo 模块文件路径 | grep parm
```

### 内核日志级别控制
**功能说明：** 控制系统打印输出的日志级别

**printk日志级别：**
- 0 = KERN_EMERG（紧急）
- 1 = KERN_ALERT（警报）
- 2 = KERN_CRIT（关键）
- 3 = KERN_ERR（错误）
- 4 = KERN_WARNING（警告）
- 5 = KERN_NOTICE（通知）
- 6 = KERN_INFO（信息）
- 7 = KERN_DEBUG（调试）

**示例：**
```bash
# 查看当前控制台日志级别
cat /proc/sys/kernel/printk

# 临时修改控制台日志级别
echo 2 4 1 7 > /proc/sys/kernel/printk

# 永久修改
sudo sysctl -w kernel.printk="2 4 1 7"
```

### 实用的调试命令组合
**示例：**
```bash
# 加载模块并立即查看相关日志
sudo insmod 模块.ko && sudo dmesg | tail -10

# 监控特定模块的实时日志
sudo dmesg -w | grep "模块名"

# 清空后加载，便于查看新增日志
sudo dmesg -c; sudo insmod 模块.ko; sudo dmesg
```
